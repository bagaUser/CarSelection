# Экспертная система выбора автомобиля

Система для подбора автомобилей по заданным критериям (бюджет, тип кузова, минимальная мощность).

## Структура проекта

```
Project/
├── main.py              # Главный файл с GUI интерфейсом (Tkinter)
├── database.py          # Модуль работы с базой данных MySQL
├── expert_system.py     # Модуль экспертной системы (логика подбора)
├── config.py            # Конфигурационный файл для настроек MySQL
├── test_system.py       # Тестовый скрипт для проверки функциональности
├── check_mysql_connection.py  # Скрипт для диагностики подключения MySQL
├── requirements.txt     # Зависимости проекта
├── README.md            # Документация
├── USER_GUIDE.md        # Руководство пользователя (подробная инструкция)
└── MYSQL_SETUP.md       # Инструкция по установке и настройке MySQL
```

## Особенности

- ✅ **Автоматическая инициализация БД**: При первом запуске создается база данных MySQL с минимум 100 записями об автомобилях
- ✅ **MySQL база данных**: Надежная реляционная база данных для профессионального использования
- ✅ **Графический интерфейс**: Удобный GUI на Tkinter
- ✅ **Настраиваемое подключение**: Параметры подключения можно настроить через config.py

## Установка и запуск

### Предварительные требования

1. **Установите MySQL Server** (см. подробную инструкцию в `MYSQL_SETUP.md`)
2. **Установите Python 3.7 или выше**
3. **Установите зависимости**:
```bash
pip install -r requirements.txt
```

### Настройка подключения

1. Откройте файл `config.py` и измените параметры подключения к MySQL:
```python
MYSQL_CONFIG = {
    'host': 'localhost',
    'user': 'root',
    'password': 'ваш_пароль',  # Измените на свой пароль MySQL
    'database': 'AutoSelection'
}
```

2. Убедитесь, что MySQL сервер запущен

### Запуск приложения

```bash
python main.py
```

## Тестирование

Для запуска тестов:
```bash
python test_system.py
```

Тесты проверяют:
- Инициализацию базы данных
- Наличие минимум 100 записей
- Функциональность экспертной системы
- Корректность поиска по критериям

## Сборка в исполняемый файл (EXE)

### Будет ли работать на другом компьютере?

**ДА, будет работать!** SQLite - это встроенная портативная база данных:
- Не требует отдельной установки
- База данных хранится в файле `cars.db` в той же папке, что и исполняемый файл
- Не требует настройки сервера или подключения к сети

### Инструкция по сборке

#### 1. Установка PyInstaller

```bash
pip install pyinstaller
```

#### 2. Сборка исполняемого файла

**Вариант 1: Один файл (рекомендуется)**
```bash
pyinstaller --onefile --windowed --name "CarSelection" --icon=NONE main.py
```

**Вариант 2: Папка с файлами**
```bash
pyinstaller --windowed --name "CarSelection" main.py
```

**Параметры:**
- `--onefile` - создать один исполняемый файл (все будет упаковано)
- `--windowed` - скрыть консольное окно (для GUI приложений)
- `--name` - имя итогового файла

#### 3. Работа с базой данных в exe

**Важно:** При использовании `--onefile` PyInstaller распаковывает файлы во временную папку. Нужно немного изменить `database.py`:

**Текущая версия уже настроена правильно** - база данных создается в той же директории, где находится исполняемый файл (или скрипт). SQLite автоматически создаст файл `cars.db`, если его нет, при первом запуске.

#### 4. Распространение приложения

После сборки файлы будут в папке `dist/`:
- Если использовали `--onefile`: один файл `CarSelection.exe`
- Если без `--onefile`: папка `CarSelection/` с файлами

**Для распространения:**
1. Скопируйте `CarSelection.exe` (или всю папку `CarSelection/`)
2. Запустите на другом компьютере (Python не требуется!)
3. При первом запуске создастся файл `cars.db` с данными

**Примечание:** Если вы хотите, чтобы база данных была уже заполнена на другом компьютере:
- Запустите программу один раз на вашем компьютере
- Скопируйте созданный файл `cars.db` вместе с `CarSelection.exe`
- Файл базы данных будет использоваться на новом компьютере

## Использование

1. Запустите приложение
2. Введите критерии поиска:
   - **Бюджет**: максимальная цена в рублях
   - **Тип кузова**: выберите из списка (Седан, Хэтчбек, Внедорожник, Купе, Пикап)
   - **Мин. мощность**: минимальная мощность двигателя в лошадиных силах
3. Нажмите "Получить рекомендации"
4. Система покажет до 3 лучших вариантов, отсортированных по цене

**Подробное руководство:** См. файл `USER_GUIDE.md` для детальной инструкции по использованию программы.

## Технические детали

### База данных

- **Тип**: MySQL
- **База данных**: `AutoSelection` (создается автоматически при первом запуске)
- **Таблица**: `cars`
- **Поля**: id (INT AUTO_INCREMENT), brand (VARCHAR), model (VARCHAR), body_type (VARCHAR), price (INT), power (INT), description (TEXT)

### Алгоритм поиска

1. Фильтрация по критериям (бюджет, тип кузова, минимальная мощность)
2. Сортировка по цене (от дешевых к дорогим)
3. Возврат топ-3 результатов

## Требования

- Python 3.7+
- MySQL Server (требуется установка, см. MYSQL_SETUP.md)
- mysql-connector-python (устанавливается через pip)
- Tkinter (обычно входит в стандартную установку Python)

Для сборки в exe:
- PyInstaller (устанавливается через pip)
- **Важно**: MySQL Server должен быть установлен на целевом компьютере

## Решение проблем

### Ошибки подключения к MySQL
- Убедитесь, что MySQL сервер запущен
- Проверьте параметры подключения в `config.py` (host, user, password)
- Убедитесь, что у пользователя есть права на создание баз данных
- Подробнее см. `MYSQL_SETUP.md`

### База данных не создается
- Проверьте права пользователя MySQL на создание баз данных
- Проверьте подключение к серверу MySQL
- Посмотрите сообщения об ошибках в консоли

### Ошибка при сборке в exe
- Убедитесь, что все зависимости установлены
- Попробуйте использовать `--clean` флаг: `pyinstaller --clean --onefile --windowed main.py`
- **Важно**: На целевом компьютере должен быть установлен MySQL Server

### База данных не работает на другом компьютере
- MySQL Server должен быть установлен на целевом компьютере
- Настройте параметры подключения к MySQL на целевом компьютере
- Убедитесь, что пользователь имеет доступ к базе данных

## Дополнительная документация

- **MYSQL_SETUP.md** - Подробная инструкция по установке и настройке MySQL
- **BUILD_INSTRUCTIONS.md** - Инструкция по сборке в исполняемый файл (примечание: для MySQL требуется установка сервера на целевом компьютере)

