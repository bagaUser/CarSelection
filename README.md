# Экспертная система выбора автомобиля

Приложение для подбора автомобилей по характеристикам с использованием **дерева решений** по фильтрам. Интерфейс на PyQt6, данные хранятся в SQLite.

## Структура проекта

```
KP_Project_2/
├── main.py              # Точка входа, GUI на PyQt6
├── database.py          # Работа с БД SQLite (SQLAlchemy)
├── expert_system.py     # Экспертная система (использует дерево решений)
├── decision_tree.py     # Дерево решений по фильтрам
├── requirements.txt    # Зависимости
├── README.md           # Документация
└── cars.db             # Файл базы данных SQLite (создаётся при первом запуске)
```

## Особенности

- **Дерево решений по фильтрам** — фильтрация выполняется в фиксированном порядке: **тип кузова → цена → марка → мощность**. Каждый узел дерева соответствует одному фильтру.
- **SQLite** — база в файле `cars.db`, без отдельного сервера.
- **PyQt6** — графический интерфейс с таблицей результатов и подсказками при наведении.
- **Опциональные критерии** — можно включать только нужные фильтры (марка, тип кузова, диапазоны цены и мощности).

## Установка и запуск

### Требования

- Python 3.7+
- Зависимости из `requirements.txt` (PyQt6, SQLAlchemy)

### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Запуск приложения

```bash
python main.py
```

База данных создаётся автоматически в папке с программой. При первом запуске в неё загружаются тестовые данные об автомобилях.

## Использование

1. Запустите приложение.
2. В блоке **«Критерии поиска»** включите нужные фильтры (галочка «Использовать») и задайте значения:
   - **Марка** — выбор из списка;
   - **Тип кузова** — Седан, Хэтчбек, Внедорожник, Купе, Пикап и др.;
   - **Мин. / макс. цена** — диапазон в рублях;
   - **Мин. / макс. мощность** — диапазон в л.с.
3. Нажмите **«Найти автомобили»**.
4. Результаты отображаются в таблице; при наведении на строку показывается подробное описание автомобиля.

Фильтры применяются в порядке дерева решений: сначала тип кузова, затем цена, марка и мощность.

## Алгоритм (дерево решений)

1. Загружаются все автомобили из БД.
2. Последовательно применяются узлы дерева (фильтры):
   - **Тип кузова** — оставляются только автомобили выбранного типа (если фильтр включён).
   - **Цена** — отсекаются по мин./макс. цене (если заданы).
   - **Марка** — отсекаются по выбранной марке (если включено).
   - **Мощность** — отсекаются по мин./макс. мощности (если заданы).
3. Результат сортируется по цене по возрастанию и выводится в таблицу.

Логика дерева реализована в `decision_tree.py` (узлы `FilterNode`, сборка дерева в `build_car_decision_tree()`).

## Технические детали

### База данных

- **Тип:** SQLite, файл `cars.db`.
- **Таблица:** `cars` (id, brand, model, body_type, price, power, description).

### Сборка в исполняемый файл (EXE)

- Для сборки можно использовать PyInstaller (см. существующие инструкции в проекте).
- SQLite не требует отдельной установки: достаточно положить `cars.db` рядом с exe или позволить программе создать файл при первом запуске.

## Требования

- Python 3.7+
- PyQt6
- SQLAlchemy

Установка: `pip install -r requirements.txt`
